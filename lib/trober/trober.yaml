openapi: 3.0.3
servers:
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/harsimranmaan/jober/1.0.0
info:
  version: "1.0.0"
  title: Trober API
  description: >-
    The trober API

security:
  - ApiKeyAuth: []
paths:
  /tenants:
    get:
      summary: List all tenants
      description: >-
        List all tenants

      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tenants"
        default:
          description: error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create a new tenant
      description: >-
        Create a new tenant

      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Tenant"
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tenant"
        default:
          description: error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  "/tenants/{id}":
    patch:
      parameters:
        - name: id
          in: path
          required: true
          description: The id of the tenant
          schema:
            type: string
            format: uuid
      summary: Update an existing tenant
      description: >-
        Update an existing tenant

      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Tenant"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tenant"
        default:
          description: error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    get:
      parameters:
        - name: id
          in: path
          required: true
          description: The id of the tenant
          schema:
            type: string
            format: uuid
      summary: Get tenant details
      description: >-
        Get tenant details

      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tenant"
        default:
          description: error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /users:
    get:
      summary: List all users
      description: >-
        List all users

      parameters:
        - name: name
          in: query
          description: The name of the user
          schema:
            type: string
        - name: role
          in: query
          description: The role of the user
          schema:
            $ref: "#/components/schemas/UserRole"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Users"
        default:
          description: error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create a new user
      description: >-
        Create a new user

      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/User"
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        default:
          description: error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  "/users/{id}":
    patch:
      parameters:
        - name: id
          in: path
          required: true
          description: The id of the user
          schema:
            type: string
            format: uuid
      summary: Update an existing user
      description: >-
        Update an existing user

      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/User"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        default:
          description: error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    get:
      parameters:
        - name: id
          in: path
          required: true
          description: The id of the user
          schema:
            type: string
            format: uuid
      summary: Get user details
      description: >-
        Get user details

      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        default:
          description: error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      parameters:
        - name: id
          in: path
          required: true
          description: The id of the user
          schema:
            type: string
            format: uuid
      summary: Delete the user
      description: >-
        Delete the user

      responses:
        "204":
          description: No Content
        default:
          description: error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /health:
    get:
      summary: Get server health
      description: >-
        Get server health status

      security: []
      responses:
        "200":
          description: OK
components:
  schemas:
    Tenants:
      type: array
      items:
        $ref: "#/components/schemas/Tenant"
      description: A list of Tenants
    Tenant:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        created_by:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
          minLength: 3
          maxLength: 50
        type:
          $ref: "#/components/schemas/TenantType"
      description: A Tenant in the system
    Users:
      type: array
      items:
        $ref: "#/components/schemas/User"
      description: A list of Users
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        created_by:
          type: string
          format: uuid
          readOnly: true
        tenant_id:
          type: string
          format: uuid
        customer_id:
          type: string
          format: uuid
        name:
          type: string
          minLength: 3
          maxLength: 50
        username:
          type: string
          minLength: 3
          maxLength: 50
        role:
          $ref: "#/components/schemas/UserRole"
      description: A user in the system
    Customer:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        created_by:
          type: string
          format: uuid
          readOnly: true
        tenant_id:
          type: string
          format: uuid
        name:
          type: string
          minLength: 3
          maxLength: 50
    Terminal:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        created_by:
          type: string
          format: uuid
          readOnly: true
        tenant_id:
          type: string
          format: uuid
        name:
          type: string
          minLength: 3
          maxLength: 50
        type:
          $ref: "#/components/schemas/TerminalType"
      description: A terminal that used for logistics
    Yard:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        created_by:
          type: string
          format: uuid
          readOnly: true
        tenant_id:
          type: string
          format: uuid
        name:
          type: string
          minLength: 3
          maxLength: 50
      description: A yard that the tenant uses for logistics
    Carrier:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        created_by:
          type: string
          format: uuid
          readOnly: true
        tenant_id:
          type: string
          format: uuid
        name:
          type: string
          minLength: 3
          maxLength: 50
        eta:
          type: string
          format: date-time
          readOnly: true
        type:
          $ref: "#/components/schemas/CarrierType"
      description: A carrier that ships the containers
    Container:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        created_by:
          type: string
          format: uuid
          readOnly: true
        tenant_id:
          type: string
          format: uuid
        carrier_id:
          type: string
          format: uuid
        terminal_id:
          type: string
          format: uuid
        yard_id:
          type: string
          format: uuid
        order_id:
          type: string
          format: uuid
        serial_number:
          type: string
          minLength: 7
          maxLength: 11
        origin:
          type: string
          minLength: 7
          maxLength: 20
        destination:
          type: string
          minLength: 7
          maxLength: 20
        lfd:
          type: string
          format: date-time
          readOnly: true
        reservation_time:
          type: string
          format: date-time
          readOnly: true
        size:
          $ref: "#/components/schemas/ContainerSize"
        type:
          $ref: "#/components/schemas/ContainerType"
        status:
          $ref: "#/components/schemas/ContainerStatus"
        driver_id:
          type: string
          format: uuid
        gps_url:
          type: string
          format: url
      description: A container that is being shipped
    Order:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        created_by:
          type: string
          format: uuid
          readOnly: true
        tenant_id:
          type: string
          format: uuid
        customer_id:
          type: string
          format: uuid
        serial_number:
          type: string
          minLength: 7
          maxLength: 25
        status:
          $ref: "#/components/schemas/OrderStatus"
      description: A container that is being shipped
    Customers:
      type: array
      items:
        $ref: "#/components/schemas/Customer"
      description: A list of Customers for the tenants
    TenantType:
      type: string
      enum:
        - System
        - Test
        - Production
    TerminalType:
      type: string
      enum:
        - Rail
        - Port
        - Custom
    CarrierType:
      type: string
      enum:
        - Air
        - Rail
        - Vessel
        - Road
    UserRole:
      type: string
      enum:
        - SuperAdmin
        - Admin
        - BackOffice
        - Driver
        - Customer
    ContainerStatus:
      type: string
      enum:
        - Unassigned
        - InTransit
        - ArrivedAtTerminal
        - AssignedForTransport
        - ReadyForTransport
        - Rejected
        - Loaded
        - Unloaded
        - Abandoned
    ContainerSize:
      type: string
      enum:
        - 40ST
        - 20ST
        - 40HC
        - 40HW
        - Custom
    OrderStatus:
      type: string
      enum:
        - Open
        - Accepted
        - Cancelled
        - InProgress
        - Delivered
        - Invoiced
        - PaymentReceived
    ContainerType:
      type: string
      enum:
        - Incoming
        - OutGoing
    Error:
      type: object
      required:
        - code
        - message
        - id
      properties:
        code:
          type: integer
          format: int32
        message:
          type: string
        id:
          type: string
          format: uuid
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-TOKEN
